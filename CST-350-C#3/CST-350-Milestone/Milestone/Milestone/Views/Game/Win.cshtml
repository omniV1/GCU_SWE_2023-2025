@model Milestone.Models.GameModels.Board
@{
    ViewData["Title"] = "Victory - Minesweeper";
    string GetDifficultyName(float difficulty)
    {
        return difficulty switch
        {
            0.1f => "Easy",
            0.15f => "Medium",
            0.2f => "Hard",
            _ => "Medium"
        };
    }
}

<div class="game-over-container victory-container">
    <h1 class="game-over-title victory-title">Victory!</h1>
    <div class="game-over-emoji">🎉</div>
    <p class="game-over-message">Congratulations! You've cleared all the mines!</p>

    @* Add the stats panel first and verify it works *@
    <div class="stats-panel">
        <h2 class="stats-title">Game Statistics</h2>
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-label">Game ID:</span>
                <span class="stat-value">@Model.GameId</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Time:</span>
                <span class="stat-value">@ViewBag.FinalTime</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Board Size:</span>
                <span class="stat-value">@Model.Size x @Model.Size</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Difficulty:</span>
                <span class="stat-value">@GetDifficultyName(Model.Difficulty)</span>
            </div>
        </div>
    </div>
    <div class="action-buttons">
        <form method="post" asp-controller="Game" asp-action="StartGame">
            <input type="hidden" name="difficulty"
                   value="@(Model.Difficulty == 0.1f ? "easy" : Model.Difficulty == 0.15f ? "medium" : "hard")" />
            <button type="submit" class="btn-play-again">Play Again</button>
        </form>
        <a asp-controller="Game" asp-action="Index" class="btn-main-menu">Return to Main Menu</a>
    </div>
</div>

@section Scripts {
    <script src="~/js/victory.js"></script>
}